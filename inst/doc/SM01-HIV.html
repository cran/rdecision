<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andrew J. Sims" />


<title>Elementary Semi-Markov Model (Chancellor 1997)</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Elementary Semi-Markov Model (Chancellor
1997)</h1>
<h3 class="subtitle">Monotherapy versus combination therapy for HIV</h3>
<h4 class="author">Andrew J. Sims</h4>
<h4 class="date">May 2021</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This vignette is an example of an elementary semi-Markov model using
the <code>rdecision</code> package. It is based on the example given by
Briggs <em>et al</em><span class="citation"><sup>1</sup></span>
(Exercise 2.5) which itself is based on a model described by Chancellor
<em>et al</em><span class="citation"><sup>2</sup></span>. The model
compares a combination therapy of Lamivudine/Zidovudine versus
Zidovudine monotherapy in people with HIV infection.</p>
</div>
<div id="creating-the-model" class="section level1">
<h1>Creating the model</h1>
<div id="model-variables" class="section level2">
<h2>Model variables</h2>
<p>The variables used in the model are all numerical constants, and are
defined as follows.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transition counts</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>nAA <span class="ot">&lt;-</span> <span class="dv">1251</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>nAB <span class="ot">&lt;-</span> <span class="dv">350</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>nAC <span class="ot">&lt;-</span> <span class="dv">116</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>nAD <span class="ot">&lt;-</span> <span class="dv">17</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>nBB <span class="ot">&lt;-</span> <span class="dv">731</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>nBC <span class="ot">&lt;-</span> <span class="dv">512</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>nBD <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>nCC <span class="ot">&lt;-</span> <span class="dv">1312</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>nCD <span class="ot">&lt;-</span> <span class="dv">437</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Healthcare system costs</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>dmca <span class="ot">&lt;-</span> <span class="dv">1701</span> <span class="co"># direct medical costs associated with state A</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>dmcb <span class="ot">&lt;-</span> <span class="dv">1774</span> <span class="co"># direct medical costs associated with state B</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>dmcc <span class="ot">&lt;-</span> <span class="dv">6948</span> <span class="co"># direct medical costs associated with state C</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>ccca <span class="ot">&lt;-</span> <span class="dv">1055</span> <span class="co"># Community care costs associated with state A</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>cccb <span class="ot">&lt;-</span> <span class="dv">1278</span> <span class="co"># Community care costs associated with state B</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>cccc <span class="ot">&lt;-</span> <span class="dv">2059</span> <span class="co"># Community care costs associated with state C</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Drug costs</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>cAZT <span class="ot">&lt;-</span> <span class="dv">2278</span> <span class="co"># zidovudine drug cost</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>cLam <span class="ot">&lt;-</span> <span class="dv">2087</span> <span class="co"># lamivudine drug cost</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Treatment effect</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>RR <span class="ot">&lt;-</span> <span class="fl">0.509</span> </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Discount rates</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>cDR <span class="ot">&lt;-</span> <span class="dv">6</span> <span class="co"># annual discount rate, costs (%)</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>oDR <span class="ot">&lt;-</span> <span class="dv">0</span> <span class="co"># annual discount rate, benefits (%)</span></span></code></pre></div>
</div>
<div id="model-structure" class="section level2">
<h2>Model structure</h2>
<p>The model is constructed by forming a graph, with each state as a
node and each transition as an edge. Nodes (of class
<code>MarkovState</code>) and edges (class <code>Transition</code>) may
have various properties whose values reflect the variables of the model
(costs, rates etc.). Because the model is intended to evaluate survival,
the utility of states A, B and C are set to 1 (by default) and state D
to zero. Thus the incremental quality adjusted life years gained per
cycle is equivalent to the survival function.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create Markov states for monotherapy (zidovudine only)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>sAm <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;A&quot;</span>, <span class="at">cost=</span>dmca<span class="sc">+</span>ccca<span class="sc">+</span>cAZT)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>sBm <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;B&quot;</span>, <span class="at">cost=</span>dmcb<span class="sc">+</span>cccb<span class="sc">+</span>cAZT)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>sCm <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;C&quot;</span>, <span class="at">cost=</span>dmcc<span class="sc">+</span>cccc<span class="sc">+</span>cAZT)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sDm <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;D&quot;</span>, <span class="at">cost=</span><span class="dv">0</span>, <span class="at">utility=</span><span class="dv">0</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create transitions</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>tAAm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAm, sAm)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>tABm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAm, sBm)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>tACm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAm, sCm)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>tADm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAm, sDm)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>tBBm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sBm, sBm)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>tBCm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sBm, sCm)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>tBDm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sBm, sDm)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>tCCm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sCm, sCm)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>tCDm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sCm, sDm)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>tDDm <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sDm, sDm)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># construct the model</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>m.mono <span class="ot">&lt;-</span> SemiMarkovModel<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">V =</span> <span class="fu">list</span>(sAm, sBm, sCm, sDm),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">E =</span> <span class="fu">list</span>(tAAm, tABm, tACm, tADm, tBBm, tBCm, tBDm, tCCm, tCDm, tDDm),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">discount.cost =</span> cDR<span class="sc">/</span><span class="dv">100</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">discount.utility =</span> oDR<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="transition-rates-and-probabilities" class="section level2">
<h2>Transition rates and probabilities</h2>
<p>Briggs <em>et al</em><span class="citation"><sup>1</sup></span>
interpreted the observed transition counts in 1 year as transition
probabilities by dividing counts by the total transitions observed from
each state. With this assumption, the annual (per-cycle) transition
probabilities are calculated as follows and applied to the model via the
<code>set_probabilities</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>nA <span class="ot">&lt;-</span> nAA <span class="sc">+</span> nAB <span class="sc">+</span> nAC <span class="sc">+</span> nAD</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>nB <span class="ot">&lt;-</span> nBB <span class="sc">+</span> nBC <span class="sc">+</span> nBD</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>nC <span class="ot">&lt;-</span> nCC <span class="sc">+</span> nCD</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>Pt <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(nAA<span class="sc">/</span>nA, nAB<span class="sc">/</span>nA, nAC<span class="sc">/</span>nA, nAD<span class="sc">/</span>nA, </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>         <span class="dv">0</span>, nBB<span class="sc">/</span>nB, nBC<span class="sc">/</span>nB, nBD<span class="sc">/</span>nB,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>         <span class="dv">0</span>,      <span class="dv">0</span>, nCC<span class="sc">/</span>nC, nCD<span class="sc">/</span>nC,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>         <span class="dv">0</span>,      <span class="dv">0</span>,      <span class="dv">0</span>,      <span class="dv">1</span>),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow=</span><span class="dv">4</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>, </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">dimnames=</span><span class="fu">list</span>(<span class="at">source=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>), <span class="at">target=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>m.mono<span class="sc">$</span><span class="fu">set_probabilities</span>(Pt)</span></code></pre></div>
<p>More usually, fully observed transition counts are converted into
transition rates (rather than probabilities), as described by Welton and
Ades<span class="citation"><sup>3</sup></span>. This is because counting
events and measuring total time at risk includes individuals who make
more than one transition during the observation time, and can lead to
rates with values which exceed 1. In contrast, the difference between a
census of the number of individuals in each state at the start of the
interval and another at the end is directly related to the per-cycle
probability. As Miller and Homan<span class="citation"><sup>4</sup></span>, Welton and Ades<span class="citation"><sup>3</sup></span>, Jones <em>et al</em><span class="citation"><sup>5</sup></span> and others note, conversion between
rates and probabilities for multi-state Markov models is
non-trivial<span class="citation"><sup>5</sup></span> and care is needed
when modellers calculate probabilities from published rates for use in
<code>SemiMarkoModel</code>s.</p>
</div>
</div>
<div id="checking-the-model" class="section level1">
<h1>Checking the model</h1>
<div id="diagram" class="section level2">
<h2>Diagram</h2>
<p>A representation of the model in DOT format (<a href="https://graphviz.org">Graphviz</a>) can be created using the
<code>as_DOT</code> function of <code>SemiMarkovModel</code>. The
function returns a character vector which can be saved in a file
(<code>.gv</code> extension) for visualization with the <code>dot</code>
tool of Graphviz, or plotted directly in R via the
<code>DiagrammeR</code> package. The Markov model for monotherapy is
shown in Figure 1.</p>
<div class="figure" style="text-align: center">
<img src="data:image/png;base64,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" alt="Figure 1. Markov model for comparison of HIV therapy. A: 200 &lt; cd4 &lt; 500, B: cd4 &lt; 200, C: AIDS, D: Death." />
<p class="caption">
Figure 1. Markov model for comparison of HIV therapy. A: 200 &lt; cd4
&lt; 500, B: cd4 &lt; 200, C: AIDS, D: Death.
</p>
</div>
</div>
<div id="model-states" class="section level2">
<h2>Model states</h2>
<p>The states in the model can be tabulated with the function
<code>tabulate_states</code>. For the monotherapy model, the states are
tabulated below. The cost of each state includes the annual cost of AZT
(Zidovudine).</p>
<table style="width:21%;">
<colgroup>
<col width="9%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Name</th>
<th align="right">Cost</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="right">5034</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="right">5330</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="right">11285</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
<div id="per-cycle-transition-probabilities" class="section level2">
<h2>Per-cycle transition probabilities</h2>
<p>The per-cycle transition probabilities, which are the cells of the
Markov transition matrix, can be extracted from the model via the
function <code>transition_probabilities</code>. For the monotherapy
model, the transition matrix is shown below. This is consistent with the
Table 1 of Chancellor <em>et al</em><span class="citation"><sup>2</sup></span>.</p>
<table style="width:65%;">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"> </th>
<th align="center">A</th>
<th align="center">B</th>
<th align="center">C</th>
<th align="center">D</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="center">0.7215</td>
<td align="center">0.2018</td>
<td align="center">0.0669</td>
<td align="center">0.009804</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="center">0</td>
<td align="center">0.5811</td>
<td align="center">0.407</td>
<td align="center">0.01192</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.7501</td>
<td align="center">0.2499</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="running-the-model" class="section level1">
<h1>Running the model</h1>
<p>Model function <code>cycle</code> applies one cycle of a Markov model
to a defined starting population in each state. It returns a table with
one row per state, and each row containing several columns, including
the population at the end of the state and the cost of occupancy of
states, normalized by the number of patients in the cohort, with
discounting applied.</p>
<p>Multiple cycles are run by feeding the state populations at the end
of one cycle into the next. Function <code>cycles</code> does this and
returns a data frame with one row per cycle, and each row containing the
state populations and the aggregated cost of occupancy for all states,
with discounting applied. This is done below for the first 20 cycles of
the model for monotherapy, without half cycle correction, with discount.
In addition, the proportion of patients alive at each cycle (the Markov
trace) is added to the table. The populations and discounted costs are
consistent with Briggs <em>et al</em>, Table 2.3<span class="citation"><sup>1</sup></span>, and the QALY column is consistent
with Table 2.4 (without half cycle correction). No discount was applied
to the utilities.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create starting populations</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>populations <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">A =</span> N, <span class="at">B =</span> <span class="dv">0</span>, <span class="at">C =</span> <span class="dv">0</span>, <span class="at">D =</span> <span class="dv">0</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>m.mono<span class="sc">$</span><span class="fu">reset</span>(populations)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># run 20 cycles</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>MT.mono <span class="ot">&lt;-</span> m.mono<span class="sc">$</span><span class="fu">cycles</span>(<span class="at">ncycles=</span><span class="dv">20</span>, <span class="at">hcc.pop=</span><span class="cn">FALSE</span>, <span class="at">hcc.cost=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<table style="width:67%;">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="9%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Years</th>
<th align="right">A</th>
<th align="right">B</th>
<th align="right">C</th>
<th align="right">D</th>
<th align="right">Cost</th>
<th align="right">QALY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">1000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">721</td>
<td align="right">202</td>
<td align="right">67</td>
<td align="right">10</td>
<td align="right">5153</td>
<td align="right">0.99</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">520</td>
<td align="right">263</td>
<td align="right">181</td>
<td align="right">36</td>
<td align="right">5393</td>
<td align="right">0.964</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">376</td>
<td align="right">258</td>
<td align="right">277</td>
<td align="right">89</td>
<td align="right">5368</td>
<td align="right">0.911</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">271</td>
<td align="right">226</td>
<td align="right">338</td>
<td align="right">165</td>
<td align="right">5055</td>
<td align="right">0.835</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">195</td>
<td align="right">186</td>
<td align="right">364</td>
<td align="right">255</td>
<td align="right">4541</td>
<td align="right">0.745</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">141</td>
<td align="right">147</td>
<td align="right">361</td>
<td align="right">350</td>
<td align="right">3929</td>
<td align="right">0.65</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">102</td>
<td align="right">114</td>
<td align="right">341</td>
<td align="right">444</td>
<td align="right">3301</td>
<td align="right">0.556</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">73</td>
<td align="right">87</td>
<td align="right">309</td>
<td align="right">531</td>
<td align="right">2708</td>
<td align="right">0.469</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">53</td>
<td align="right">65</td>
<td align="right">272</td>
<td align="right">610</td>
<td align="right">2179</td>
<td align="right">0.39</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="right">38</td>
<td align="right">49</td>
<td align="right">234</td>
<td align="right">679</td>
<td align="right">1727</td>
<td align="right">0.321</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">28</td>
<td align="right">36</td>
<td align="right">198</td>
<td align="right">739</td>
<td align="right">1350</td>
<td align="right">0.261</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="right">20</td>
<td align="right">26</td>
<td align="right">165</td>
<td align="right">789</td>
<td align="right">1045</td>
<td align="right">0.211</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">14</td>
<td align="right">19</td>
<td align="right">136</td>
<td align="right">830</td>
<td align="right">801</td>
<td align="right">0.17</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">10</td>
<td align="right">14</td>
<td align="right">111</td>
<td align="right">865</td>
<td align="right">609</td>
<td align="right">0.135</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="right">7</td>
<td align="right">10</td>
<td align="right">90</td>
<td align="right">893</td>
<td align="right">460</td>
<td align="right">0.107</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="right">5</td>
<td align="right">8</td>
<td align="right">72</td>
<td align="right">915</td>
<td align="right">346</td>
<td align="right">0.085</td>
</tr>
<tr class="even">
<td align="right">17</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">57</td>
<td align="right">933</td>
<td align="right">258</td>
<td align="right">0.067</td>
</tr>
<tr class="odd">
<td align="right">18</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">45</td>
<td align="right">948</td>
<td align="right">192</td>
<td align="right">0.052</td>
</tr>
<tr class="even">
<td align="right">19</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">959</td>
<td align="right">142</td>
<td align="right">0.041</td>
</tr>
<tr class="odd">
<td align="right">20</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">28</td>
<td align="right">968</td>
<td align="right">105</td>
<td align="right">0.032</td>
</tr>
</tbody>
</table>
</div>
<div id="model-results" class="section level1">
<h1>Model results</h1>
<div id="monotherapy" class="section level2">
<h2>Monotherapy</h2>
<p>The estimated life years is approximated by summing the proportions
of patients left alive at each cycle (Briggs <em>et al</em><span class="citation"><sup>1</sup></span>, Exercise 2.5). This is an
approximation because it ignores the population who remain alive after
21 years, and assumes all deaths occurred at the start of each cycle.
For monotherapy the expected life gained is 7.991 years at a cost of
44663 GBP.</p>
</div>
<div id="combination-therapy" class="section level2">
<h2>Combination therapy</h2>
<p>For combination therapy, a similar model was created, with adjusted
costs and transition rates. Following Briggs <em>et al</em><span class="citation"><sup>1</sup></span> the treatment effect was applied to
the probabilities, and these were used as inputs to the model. More
usually, treatment effects are applied to rates, rather than
probabilities.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># annual probabilities modified by treatment effect</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>pAB <span class="ot">&lt;-</span> RR<span class="sc">*</span>nAB<span class="sc">/</span>nA</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>pAC <span class="ot">&lt;-</span> RR<span class="sc">*</span>nAC<span class="sc">/</span>nC</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>pAD <span class="ot">&lt;-</span> RR<span class="sc">*</span>nAD<span class="sc">/</span>nA</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>pBC <span class="ot">&lt;-</span> RR<span class="sc">*</span>nBC<span class="sc">/</span>nB</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>pBD <span class="ot">&lt;-</span> RR<span class="sc">*</span>nBD<span class="sc">/</span>nB</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>pCD <span class="ot">&lt;-</span> RR<span class="sc">*</span>nCD<span class="sc">/</span>nC</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># annual transition probability matrix</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>Ptc <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span><span class="sc">-</span>pAB<span class="sc">-</span>pAC<span class="sc">-</span>pAD,         pAB,     pAC, pAD, </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span>, (<span class="dv">1</span><span class="sc">-</span>pBC<span class="sc">-</span>pBD),     pBC, pBD,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span>,           <span class="dv">0</span>, (<span class="dv">1</span><span class="sc">-</span>pCD), pCD,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                <span class="dv">0</span>,           <span class="dv">0</span>,       <span class="dv">0</span>,   <span class="dv">1</span>),</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">nrow=</span><span class="dv">4</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>, </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">dimnames=</span><span class="fu">list</span>(<span class="at">source=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>), <span class="at">target=</span><span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>))</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># create Markov states for combination therapy</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>sAc <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;A&quot;</span>, <span class="at">cost=</span>dmca<span class="sc">+</span>ccca<span class="sc">+</span>cAZT<span class="sc">+</span>cLam)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>sBc <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;B&quot;</span>, <span class="at">cost=</span>dmcb<span class="sc">+</span>cccb<span class="sc">+</span>cAZT<span class="sc">+</span>cLam)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>sCc <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;C&quot;</span>, <span class="at">cost=</span>dmcc<span class="sc">+</span>cccc<span class="sc">+</span>cAZT<span class="sc">+</span>cLam)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>sDc <span class="ot">&lt;-</span> MarkovState<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;D&quot;</span>, <span class="at">cost=</span><span class="dv">0</span>, <span class="at">utility=</span><span class="dv">0</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="co"># create transitions</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>tAAc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAc, sAc)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>tABc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAc, sBc)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>tACc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAc, sCc)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>tADc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sAc, sDc)</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>tBBc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sBc, sBc)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>tBCc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sBc, sCc)</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>tBDc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sBc, sDc)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>tCCc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sCc, sCc)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>tCDc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sCc, sDc)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>tDDc <span class="ot">&lt;-</span> Transition<span class="sc">$</span><span class="fu">new</span>(sDc, sDc)</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a><span class="co"># construct the model</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>m.comb <span class="ot">&lt;-</span> SemiMarkovModel<span class="sc">$</span><span class="fu">new</span>(</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">V =</span> <span class="fu">list</span>(sAc, sBc, sCc, sDc),</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">E =</span> <span class="fu">list</span>(tAAc, tABc, tACc, tADc, tBBc, tBCc, tBDc, tCCc, tCDc, tDDc),</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">discount.cost =</span> cDR<span class="sc">/</span><span class="dv">100</span>,</span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">discount.utility =</span> oDR<span class="sc">/</span><span class="dv">100</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="co"># set the probabilities</span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>m.comb<span class="sc">$</span><span class="fu">set_probabilities</span>(Ptc)</span></code></pre></div>
<p>The per-cycle transition matrix for the combination therapy is as
follows:</p>
<table style="width:67%;">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="12%" />
<col width="13%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"> </th>
<th align="center">A</th>
<th align="center">B</th>
<th align="center">C</th>
<th align="center">D</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="center">0.8585</td>
<td align="center">0.1027</td>
<td align="center">0.03376</td>
<td align="center">0.00499</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="center">0</td>
<td align="center">0.7868</td>
<td align="center">0.2072</td>
<td align="center">0.006069</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0.8728</td>
<td align="center">0.1272</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
</tbody>
</table>
<p>In this model, lamivudine is given for the first 2 years, with the
treatment effect assumed to persist for the same period. The state
populations and cycle numbers are retained by the model between calls to
<code>cycle</code> or <code>cycles</code> and can be retrieved by
calling <code>get_populations</code>. In this example, the combination
therapy model is run for 2 cycles, then the population is used to
continue with the monotherapy model for the remaining 8 years. The
<code>reset</code> function is used to set the cycle number and elapsed
time of the new run of the mono model.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run combination therapy model for 2 years</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>populations <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;A&#39;</span><span class="ot">=</span>N, <span class="st">&#39;B&#39;</span><span class="ot">=</span><span class="dv">0</span>, <span class="st">&#39;C&#39;</span><span class="ot">=</span><span class="dv">0</span>, <span class="st">&#39;D&#39;</span><span class="ot">=</span><span class="dv">0</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>m.comb<span class="sc">$</span><span class="fu">reset</span>(populations)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># run 2 cycles</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>MT.comb <span class="ot">&lt;-</span> m.comb<span class="sc">$</span><span class="fu">cycles</span>(<span class="dv">2</span>, <span class="at">hcc.pop=</span><span class="cn">FALSE</span>, <span class="at">hcc.cost=</span><span class="cn">FALSE</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># feed populations into mono model &amp; reset cycle counter and time</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>populations <span class="ot">&lt;-</span> m.comb<span class="sc">$</span><span class="fu">get_populations</span>()</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>m.mono<span class="sc">$</span><span class="fu">reset</span>(</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  populations, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">icycle=</span><span class="fu">as.integer</span>(<span class="dv">2</span>), </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">elapsed=</span><span class="fu">as.difftime</span>(<span class="fl">365.25</span><span class="sc">*</span><span class="dv">2</span>, <span class="at">units=</span><span class="st">&quot;days&quot;</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># and run model for next 18 years</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>MT.comb <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  MT.comb, m.mono<span class="sc">$</span><span class="fu">cycles</span>(<span class="at">ncycles=</span><span class="dv">18</span>, <span class="at">hcc.pop=</span><span class="cn">FALSE</span>, <span class="at">hcc.cost=</span><span class="cn">FALSE</span>)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The Markov trace for combination therapy is as follows:</p>
<table style="width:67%;">
<colgroup>
<col width="11%" />
<col width="9%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
<col width="9%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="right">Years</th>
<th align="right">A</th>
<th align="right">B</th>
<th align="right">C</th>
<th align="right">D</th>
<th align="right">Cost</th>
<th align="right">QALY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">1000</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">859</td>
<td align="right">103</td>
<td align="right">34</td>
<td align="right">5</td>
<td align="right">6912</td>
<td align="right">0.995</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">737</td>
<td align="right">169</td>
<td align="right">80</td>
<td align="right">14</td>
<td align="right">6736</td>
<td align="right">0.986</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="right">532</td>
<td align="right">247</td>
<td align="right">178</td>
<td align="right">43</td>
<td align="right">5039</td>
<td align="right">0.957</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">384</td>
<td align="right">251</td>
<td align="right">270</td>
<td align="right">96</td>
<td align="right">4998</td>
<td align="right">0.904</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="right">277</td>
<td align="right">223</td>
<td align="right">330</td>
<td align="right">170</td>
<td align="right">4713</td>
<td align="right">0.83</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="right">200</td>
<td align="right">186</td>
<td align="right">357</td>
<td align="right">258</td>
<td align="right">4245</td>
<td align="right">0.742</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">144</td>
<td align="right">148</td>
<td align="right">357</td>
<td align="right">351</td>
<td align="right">3684</td>
<td align="right">0.649</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="right">104</td>
<td align="right">115</td>
<td align="right">337</td>
<td align="right">443</td>
<td align="right">3102</td>
<td align="right">0.557</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="right">75</td>
<td align="right">88</td>
<td align="right">307</td>
<td align="right">530</td>
<td align="right">2551</td>
<td align="right">0.47</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="right">54</td>
<td align="right">66</td>
<td align="right">271</td>
<td align="right">609</td>
<td align="right">2057</td>
<td align="right">0.391</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="right">39</td>
<td align="right">49</td>
<td align="right">234</td>
<td align="right">678</td>
<td align="right">1633</td>
<td align="right">0.322</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="right">28</td>
<td align="right">37</td>
<td align="right">198</td>
<td align="right">737</td>
<td align="right">1279</td>
<td align="right">0.263</td>
</tr>
<tr class="even">
<td align="right">13</td>
<td align="right">20</td>
<td align="right">27</td>
<td align="right">165</td>
<td align="right">787</td>
<td align="right">990</td>
<td align="right">0.213</td>
</tr>
<tr class="odd">
<td align="right">14</td>
<td align="right">15</td>
<td align="right">20</td>
<td align="right">136</td>
<td align="right">829</td>
<td align="right">760</td>
<td align="right">0.171</td>
</tr>
<tr class="even">
<td align="right">15</td>
<td align="right">11</td>
<td align="right">14</td>
<td align="right">111</td>
<td align="right">864</td>
<td align="right">579</td>
<td align="right">0.136</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="right">8</td>
<td align="right">11</td>
<td align="right">90</td>
<td align="right">892</td>
<td align="right">437</td>
<td align="right">0.108</td>
</tr>
<tr class="even">
<td align="right">17</td>
<td align="right">6</td>
<td align="right">8</td>
<td align="right">72</td>
<td align="right">914</td>
<td align="right">329</td>
<td align="right">0.086</td>
</tr>
<tr class="odd">
<td align="right">18</td>
<td align="right">4</td>
<td align="right">6</td>
<td align="right">58</td>
<td align="right">933</td>
<td align="right">246</td>
<td align="right">0.067</td>
</tr>
<tr class="even">
<td align="right">19</td>
<td align="right">3</td>
<td align="right">4</td>
<td align="right">46</td>
<td align="right">947</td>
<td align="right">183</td>
<td align="right">0.053</td>
</tr>
<tr class="odd">
<td align="right">20</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">36</td>
<td align="right">959</td>
<td align="right">136</td>
<td align="right">0.041</td>
</tr>
</tbody>
</table>
</div>
<div id="comparison-of-treatments" class="section level2">
<h2>Comparison of treatments</h2>
<p>The ICER is calculated by running both models and calculating the
incremental cost per life year gained. Over the 20 year time horizon,
the expected life years gained for monotherapy was 7.991 years at a
total cost per patient of 44,663 GBP. The expected life years gained
with combination therapy for two years was 8.94 at a total cost per
patient of 50,607 GBP. The incremental change in life years was 0.949
years at an incremental cost of 5,944 GBP, giving an ICER of 6264
GBP/QALY. This is consistent with the result obtained by Briggs <em>et
al</em><span class="citation"><sup>1</sup></span> (6276 GBP/QALY),
within rounding error.</p>
</div>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body" line-spacing="2">
<div id="ref-briggs2006" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Briggs, A., Claxton, K. &amp; Sculpher, M.
<em>Decision modelling for health economic evaluation</em>.
(<span>Oxford University Press</span>, 2006).</div>
</div>
<div id="ref-chancellor1997" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Chancellor, J. V., Hill, A. M., Sabin, C. A.,
Simpson, K. N. &amp; Youle, M. Modelling the cost effectiveness of
<span>Lamivudine</span>/<span>Zidovudine</span> combination therapy in
<span>HIV</span> infection. <em>Pharmacoeconomics</em>
<strong>12,</strong> 54–66 (1997).</div>
</div>
<div id="ref-welton2005" class="csl-entry">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Welton, N. J. &amp; Ades, A. E. <a href="https://doi.org/10.1177/0272989X05282637">Estimation of
<span>Markov Chain Transition Probabilities</span> and
<span>Rates</span> from <span>Fully</span> and <span>Partially Observed
Data</span>: <span>Uncertainty Propagation</span>, <span>Evidence
Synthesis</span>, and <span>Model Calibration</span></a>. <em>Med Decis
Making</em> <strong>25,</strong> 633–645 (2005).</div>
</div>
<div id="ref-miller1994" class="csl-entry">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Miller, D. K. &amp; Homan, S. M. <a href="https://doi.org/10.1177/0272989X9401400107">Determining
<span>Transition Probabilities</span>: <span>Confusion</span> and
<span>Suggestions</span></a>. <em>Med Decis Making</em>
<strong>14,</strong> 52–58 (1994).</div>
</div>
<div id="ref-jones2017" class="csl-entry">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Jones, E., Epstein, D. &amp; García-Mochón, L.
<a href="https://doi.org/10.1177/0272989X17696997">A
<span>Procedure</span> for <span>Deriving Formulas</span> to
<span>Convert Transition Rates</span> to <span>Probabilities</span> for
<span>Multistate Markov Models</span></a>. <em>Med Decis Making</em>
<strong>37,</strong> 779–789 (2017).</div>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
