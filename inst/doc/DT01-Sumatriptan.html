<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andrew J. Sims" />


<title>Elementary decision tree (Evans 1997)</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Elementary decision tree (Evans 1997)</h1>
<h3 class="subtitle">Sumatriptan versus caffeine for migraine</h3>
<h4 class="author">Andrew J. Sims</h4>
<h4 class="date">April 2020</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This vignette is an example of modelling a decision tree using the
<code>rdecision</code> package. It is based on the example given by
Briggs<span class="citation"><sup>1</sup></span> (Box 2.3) which itself
is based on a decision tree which compared oral Sumatriptan versus oral
caffeine/Ergotamine for migraine<span class="citation"><sup>2</sup></span>.</p>
</div>
<div id="creating-the-model" class="section level1">
<h1>Creating the model</h1>
<div id="constructing-the-tree" class="section level2">
<h2>Constructing the tree</h2>
<p>The following code constructs the decision tree. In the formulation
used by <code>rdecision</code>, a decision tree is a form of
<em>arborescence</em>, a directed graph of nodes and edges, with a
single root and a unique path from the root to each leaf node. Decision
trees comprise three types of node: decision, chance and leaf nodes and
two types of edge: actions (whose sources are decision nodes) and
reactions (whose sources are chance nodes), <a href="#tree-diagram">see
figure</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Time horizon</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>th <span class="ot">&lt;-</span> <span class="fu">as.difftime</span>(<span class="dv">48</span>, <span class="at">units=</span><span class="st">&quot;hours&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># model variables for cost</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>c.sumatriptan <span class="ot">&lt;-</span> <span class="fl">16.10</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>c.caffeine <span class="ot">&lt;-</span> <span class="fl">1.32</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>c.ED <span class="ot">&lt;-</span> <span class="fl">63.16</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>c.admission <span class="ot">&lt;-</span> <span class="dv">1093</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Sumatriptan branch</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>ta <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;A&quot;</span>, <span class="at">utility=</span><span class="fl">1.0</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>tb <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;B&quot;</span>, <span class="at">utility=</span><span class="fl">0.9</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>c3 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>e1 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c3, ta, <span class="at">p=</span><span class="fl">0.594</span>, <span class="at">label=</span><span class="st">&quot;No recurrence&quot;</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>e2 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c3, tb, <span class="at">p=</span><span class="fl">0.406</span>, <span class="at">cost=</span>c.sumatriptan, </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                   <span class="at">label=</span><span class="st">&quot;Relieved 2nd dose&quot;</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;D&quot;</span>, <span class="at">utility=</span><span class="fl">0.1</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>te <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;E&quot;</span>, <span class="at">utility=</span><span class="sc">-</span><span class="fl">0.3</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>c7 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>e3 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c7, td, <span class="at">p=</span><span class="fl">0.998</span>, <span class="at">label=</span><span class="st">&quot;Relief&quot;</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>e4 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c7, te, <span class="at">p=</span><span class="fl">0.002</span>, <span class="at">cost=</span>c.admission, <span class="at">label=</span><span class="st">&quot;Hospitalization&quot;</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>tc <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;C&quot;</span>, <span class="at">utility=</span><span class="sc">-</span><span class="fl">0.3</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>c4 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>e5 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c4, tc, <span class="at">p=</span><span class="fl">0.920</span>, <span class="at">label=</span><span class="st">&quot;Endures attack&quot;</span>)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>e6 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c4, c7, <span class="at">p=</span><span class="fl">0.080</span>, <span class="at">cost=</span>c.ED, <span class="at">label=</span><span class="st">&quot;ED&quot;</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>c1 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>e7 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c1, c3, <span class="at">p=</span><span class="fl">0.558</span>, <span class="at">label=</span><span class="st">&quot;Relief&quot;</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>e8 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c1, c4, <span class="at">p=</span><span class="fl">0.442</span>, <span class="at">label=</span><span class="st">&quot;No relief&quot;</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Caffeine/Ergotamine branch</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>tf <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;F&quot;</span>, <span class="at">utility=</span><span class="fl">1.0</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>tg <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;G&quot;</span>, <span class="at">utility=</span><span class="fl">0.9</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>c5 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>e9 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c5, tf, <span class="at">p=</span><span class="fl">0.703</span>, <span class="at">label=</span><span class="st">&quot;No recurrence&quot;</span>)</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>e10 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c5, tg, <span class="at">p=</span><span class="fl">0.297</span>, <span class="at">cost=</span>c.caffeine, </span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>                    <span class="at">label=</span><span class="st">&quot;Relieved 2nd dose&quot;</span>)</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>ti <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;I&quot;</span>, <span class="at">utility=</span><span class="fl">0.1</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>tj <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;J&quot;</span>, <span class="at">utility=</span><span class="sc">-</span><span class="fl">0.3</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>c8 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>e11 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c8, ti, <span class="at">p=</span><span class="fl">0.998</span>, <span class="at">label=</span><span class="st">&quot;Relief&quot;</span>)</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>e12 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c8, tj, <span class="at">p=</span><span class="fl">0.002</span>, <span class="at">cost=</span>c.admission, <span class="at">label=</span><span class="st">&quot;Hospitalization&quot;</span>)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>th <span class="ot">&lt;-</span> LeafNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;H&quot;</span>, <span class="at">utility=</span><span class="sc">-</span><span class="fl">0.3</span>, <span class="at">interval=</span>th)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>c6 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>e13 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c6, th, <span class="at">p=</span><span class="fl">0.920</span>, <span class="at">label=</span><span class="st">&quot;Endures attack&quot;</span>)</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>e14 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c6, c8, <span class="at">p=</span><span class="fl">0.080</span>, <span class="at">cost=</span>c.ED, <span class="at">label=</span><span class="st">&quot;ED&quot;</span>)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>c2 <span class="ot">&lt;-</span> ChanceNode<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>e15 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c2, c5, <span class="at">p=</span><span class="fl">0.379</span>, <span class="at">label=</span><span class="st">&quot;Relief&quot;</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>e16 <span class="ot">&lt;-</span> Reaction<span class="sc">$</span><span class="fu">new</span>(c2, c6, <span class="at">p=</span><span class="fl">0.621</span>, <span class="at">label=</span><span class="st">&quot;No relief&quot;</span>)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co"># decision node</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> DecisionNode<span class="sc">$</span><span class="fu">new</span>(<span class="st">&quot;d1&quot;</span>)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>e17 <span class="ot">&lt;-</span> Action<span class="sc">$</span><span class="fu">new</span>(d1, c1, <span class="at">cost=</span>c.sumatriptan, <span class="at">label=</span><span class="st">&quot;Sumatriptan&quot;</span>)</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>e18 <span class="ot">&lt;-</span> Action<span class="sc">$</span><span class="fu">new</span>(d1, c2, <span class="at">cost=</span>c.caffeine, <span class="at">label=</span><span class="st">&quot;Caffeine/Ergotamine&quot;</span>)</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="co"># create lists of nodes and edges</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>V <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  d1, c1, c2, c3, c4, c5, c6, c7, c8,</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>  ta, tb, tc, td, te, tf, tg, th, ti, tj</span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>E <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  e1, e2, e3, e4, e5, e6, e7, e8, e9, e10, e11, e12, e13, e14, e15, e16, </span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  e17, e18</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="co"># tree</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>DT <span class="ot">&lt;-</span> DecisionTree<span class="sc">$</span><span class="fu">new</span>(V,E)</span></code></pre></div>
</div>
<div id="tree-diagram" class="section level2">
<h2>Tree diagram</h2>
<div class="figure" style="text-align: center">
<img src="data:image/png;base64,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" alt="Decision tree for the Sumatriptan model" />
<p class="caption">
Decision tree for the Sumatriptan model
</p>
</div>
</div>
</div>
<div id="running-the-model" class="section level1">
<h1>Running the model</h1>
<p>The method <code>evaluate</code> of decision tree objects computes
the probability, cost and utility of each <em>strategy</em> for the
model. A strategy is a unanimous prescription of the actions at each
decision node. In this example there is a single decision node with two
actions, and the strategies are simply the two forms of treatment to be
compared. More complex decision trees are also possible.</p>
<p>The paths traversable in each strategy can be evaluated individually
using the method <code>evaluate(by=&quot;path&quot;)</code>. In
<code>rdecision</code> a strategy is defined as a set of action edges
with one action edge per decision node. It is necessary to use the
option <code>by=&quot;path&quot;</code> only if information about each pathway is
required; normally it is sufficient to call <code>evaluate</code> which
will automatically aggregate the evaluation by strategy.</p>
</div>
<div id="model-results" class="section level1">
<h1>Model results</h1>
<p>The evaluation of each pathway, for each strategy, yields the
following table:</p>
<table>
<thead>
<tr class="header">
<th align="left">Leaf</th>
<th align="left">d1</th>
<th align="right">Probability</th>
<th align="right">Cost</th>
<th align="right">Utility</th>
<th align="right">QALY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="left">Sumatriptan</td>
<td align="right">0.33</td>
<td align="right">5.34</td>
<td align="right">0.33</td>
<td align="right">0.0018</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="left">Sumatriptan</td>
<td align="right">0.23</td>
<td align="right">7.29</td>
<td align="right">0.20</td>
<td align="right">0.0011</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="left">Sumatriptan</td>
<td align="right">0.41</td>
<td align="right">6.55</td>
<td align="right">-0.12</td>
<td align="right">-0.0007</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="left">Sumatriptan</td>
<td align="right">0.04</td>
<td align="right">2.80</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">E</td>
<td align="left">Sumatriptan</td>
<td align="right">0.00</td>
<td align="right">0.08</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.27</td>
<td align="right">0.35</td>
<td align="right">0.27</td>
<td align="right">0.0015</td>
</tr>
<tr class="odd">
<td align="left">G</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.11</td>
<td align="right">0.30</td>
<td align="right">0.10</td>
<td align="right">0.0006</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.57</td>
<td align="right">0.75</td>
<td align="right">-0.17</td>
<td align="right">-0.0009</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.05</td>
<td align="right">3.20</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.00</td>
<td align="right">0.12</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
</tbody>
</table>
<p>There are, as expected, ten pathways (5 per strategy). The expected
cost, utility and QALY (utility multiplied by the time horizon of the
model) for each choice can be calculated from the table above, or by
invoking the <code>evaluate</code> method of a decision tree object with
the default parameter <code>by=&quot;strategy&quot;</code>. This gives the
following result, consistent with that reported by Evans <em>et
al</em><span class="citation"><sup>2</sup></span>.</p>
<table>
<thead>
<tr class="header">
<th align="left">d1</th>
<th align="right">Cost</th>
<th align="right">Utility</th>
<th align="right">QALY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Caffeine/Ergotamine</td>
<td align="right">4.71</td>
<td align="right">0.20128</td>
<td align="right">0.00110</td>
</tr>
<tr class="even">
<td align="left">Sumatriptan</td>
<td align="right">22.06</td>
<td align="right">0.41686</td>
<td align="right">0.00228</td>
</tr>
</tbody>
</table>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body" line-spacing="2">
<div id="ref-briggs2006" class="csl-entry">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Briggs, A., Claxton, K. &amp; Sculpher, M.
<em>Decision modelling for health economic evaluation</em>.
(<span>Oxford University Press</span>, 2006).</div>
</div>
<div id="ref-evans1997" class="csl-entry">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Evans, K. W., Boan, J. A., Evans, J. L. &amp;
Shuaib, A. Economic evaluation of oral <span>Sumatriptan</span> compared
with oral <span>Caffeine</span>/<span>Ergotamine</span> for migraine.
<em>Pharmacoeconomics</em> <strong>12,</strong> 565–577 (1997).</div>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
