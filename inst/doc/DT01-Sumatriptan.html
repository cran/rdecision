<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Andrew J. Sims" />


<title>Elementary decision tree (Evans 1997)</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Elementary decision tree (Evans 1997)</h1>
<h3 class="subtitle">Sumatriptan versus caffeine for migraine</h3>
<h4 class="author">Andrew J. Sims</h4>
<h4 class="date">April 2020</h4>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This vignette is an example of modelling a decision tree using the <code>rdecision</code> package. It is based on the example given by Briggs<span class="citation"><sup>1</sup></span> (Box 2.3) which itself is based on a decision tree which compared oral Sumatriptan versus oral caffeine/Ergotamine for migraine<span class="citation"><sup>2</sup></span>.</p>
</div>
<div id="creating-the-model" class="section level1">
<h1>Creating the model</h1>
<div id="constructing-the-tree" class="section level2">
<h2>Constructing the tree</h2>
<p>The following code constructs the decision tree. In the formulation used by <code>rdecision</code>, a decision tree is a form of <em>arborescence</em>, a directed graph of nodes and edges, with a single root and a unique path from the root to each leaf node. Decision trees comprise three types of node: decision, chance and leaf nodes and two types of edge: actions (whose sources are decision nodes) and reactions (whose sources are chance nodes), <a href="#tree-diagram">see figure</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Time horizon</span>
th &lt;-<span class="st"> </span><span class="kw">as.difftime</span>(<span class="dv">48</span>, <span class="dt">units=</span><span class="st">&quot;hours&quot;</span>)

<span class="co"># model variables for cost</span>
c.sumatriptan &lt;-<span class="st"> </span><span class="fl">16.10</span>
c.caffeine &lt;-<span class="st"> </span><span class="fl">1.32</span>
c.ED &lt;-<span class="st"> </span><span class="fl">63.16</span>
c.admission &lt;-<span class="st"> </span><span class="dv">1093</span>

<span class="co"># Sumatriptan branch</span>
ta &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;A&quot;</span>, <span class="dt">utility=</span><span class="fl">1.0</span>, <span class="dt">interval=</span>th)
tb &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;B&quot;</span>, <span class="dt">utility=</span><span class="fl">0.9</span>, <span class="dt">interval=</span>th)
c3 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e1 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c3, ta, <span class="dt">p=</span><span class="fl">0.594</span>, <span class="dt">label=</span><span class="st">&quot;No recurrence&quot;</span>)
e2 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c3, tb, <span class="dt">p=</span><span class="fl">0.406</span>, <span class="dt">cost=</span>c.sumatriptan, 
                   <span class="dt">label=</span><span class="st">&quot;Relieved 2nd dose&quot;</span>)

td &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;D&quot;</span>, <span class="dt">utility=</span><span class="fl">0.1</span>, <span class="dt">interval=</span>th)
te &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;E&quot;</span>, <span class="dt">utility=</span><span class="op">-</span><span class="fl">0.3</span>, <span class="dt">interval=</span>th)
c7 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e3 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c7, td, <span class="dt">p=</span><span class="fl">0.998</span>, <span class="dt">label=</span><span class="st">&quot;Relief&quot;</span>)
e4 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c7, te, <span class="dt">p=</span><span class="fl">0.002</span>, <span class="dt">cost=</span>c.admission, <span class="dt">label=</span><span class="st">&quot;Hospitalization&quot;</span>)

tc &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;C&quot;</span>, <span class="dt">utility=</span><span class="op">-</span><span class="fl">0.3</span>, <span class="dt">interval=</span>th)
c4 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e5 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c4, tc, <span class="dt">p=</span><span class="fl">0.920</span>, <span class="dt">label=</span><span class="st">&quot;Endures attack&quot;</span>)
e6 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c4, c7, <span class="dt">p=</span><span class="fl">0.080</span>, <span class="dt">cost=</span>c.ED, <span class="dt">label=</span><span class="st">&quot;ED&quot;</span>)

c1 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e7 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c1, c3, <span class="dt">p=</span><span class="fl">0.558</span>, <span class="dt">label=</span><span class="st">&quot;Relief&quot;</span>)
e8 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c1, c4, <span class="dt">p=</span><span class="fl">0.442</span>, <span class="dt">label=</span><span class="st">&quot;No relief&quot;</span>)

<span class="co"># Caffeine/Ergotamine branch</span>
tf &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;F&quot;</span>, <span class="dt">utility=</span><span class="fl">1.0</span>, <span class="dt">interval=</span>th)
tg &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;G&quot;</span>, <span class="dt">utility=</span><span class="fl">0.9</span>, <span class="dt">interval=</span>th)
c5 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e9 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c5, tf, <span class="dt">p=</span><span class="fl">0.703</span>, <span class="dt">label=</span><span class="st">&quot;No recurrence&quot;</span>)
e10 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c5, tg, <span class="dt">p=</span><span class="fl">0.297</span>, <span class="dt">cost=</span>c.caffeine, 
                    <span class="dt">label=</span><span class="st">&quot;Relieved 2nd dose&quot;</span>)

ti &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;I&quot;</span>, <span class="dt">utility=</span><span class="fl">0.1</span>, <span class="dt">interval=</span>th)
tj &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;J&quot;</span>, <span class="dt">utility=</span><span class="op">-</span><span class="fl">0.3</span>, <span class="dt">interval=</span>th)
c8 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e11 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c8, ti, <span class="dt">p=</span><span class="fl">0.998</span>, <span class="dt">label=</span><span class="st">&quot;Relief&quot;</span>)
e12 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c8, tj, <span class="dt">p=</span><span class="fl">0.002</span>, <span class="dt">cost=</span>c.admission, <span class="dt">label=</span><span class="st">&quot;Hospitalization&quot;</span>)
 
th &lt;-<span class="st"> </span>LeafNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;H&quot;</span>, <span class="dt">utility=</span><span class="op">-</span><span class="fl">0.3</span>, <span class="dt">interval=</span>th)
c6 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e13 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c6, th, <span class="dt">p=</span><span class="fl">0.920</span>, <span class="dt">label=</span><span class="st">&quot;Endures attack&quot;</span>)
e14 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c6, c8, <span class="dt">p=</span><span class="fl">0.080</span>, <span class="dt">cost=</span>c.ED, <span class="dt">label=</span><span class="st">&quot;ED&quot;</span>)

c2 &lt;-<span class="st"> </span>ChanceNode<span class="op">$</span><span class="kw">new</span>()
e15 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c2, c5, <span class="dt">p=</span><span class="fl">0.379</span>, <span class="dt">label=</span><span class="st">&quot;Relief&quot;</span>)
e16 &lt;-<span class="st"> </span>Reaction<span class="op">$</span><span class="kw">new</span>(c2, c6, <span class="dt">p=</span><span class="fl">0.621</span>, <span class="dt">label=</span><span class="st">&quot;No relief&quot;</span>)

<span class="co"># decision node</span>
d1 &lt;-<span class="st"> </span>DecisionNode<span class="op">$</span><span class="kw">new</span>(<span class="st">&quot;d1&quot;</span>)
e17 &lt;-<span class="st"> </span>Action<span class="op">$</span><span class="kw">new</span>(d1, c1, <span class="dt">cost=</span>c.sumatriptan, <span class="dt">label=</span><span class="st">&quot;Sumatriptan&quot;</span>)
e18 &lt;-<span class="st"> </span>Action<span class="op">$</span><span class="kw">new</span>(d1, c2, <span class="dt">cost=</span>c.caffeine, <span class="dt">label=</span><span class="st">&quot;Caffeine/Ergotamine&quot;</span>)
 
<span class="co"># create lists of nodes and edges</span>
V &lt;-<span class="st"> </span><span class="kw">list</span>(
  d1, c1, c2, c3, c4, c5, c6, c7, c8,
  ta, tb, tc, td, te, tf, tg, th, ti, tj
)
E &lt;-<span class="st"> </span><span class="kw">list</span>(
  e1, e2, e3, e4, e5, e6, e7, e8, e9, e10, e11, e12, e13, e14, e15, e16, 
  e17, e18
)
<span class="co"># tree</span>
DT &lt;-<span class="st"> </span>DecisionTree<span class="op">$</span><span class="kw">new</span>(V,E)</code></pre></div>
</div>
<div id="tree-diagram" class="section level2">
<h2>Tree diagram</h2>
</div>
</div>
<div id="running-the-model" class="section level1">
<h1>Running the model</h1>
<p>The method <code>evaluate</code> of decision tree objects computes the probability, cost and utility of each <em>strategy</em> for the model. A strategy is a unanimous prescription of the actions at each decision node. In this example there is a single decision node with two actions, and the strategies are simply the two forms of treatment to be compared. More complex decision trees are also possible.</p>
<p>The paths traversable in each strategy can be evaluated individually using the method <code>evaluate(by=&quot;path&quot;)</code>. In <code>rdecision</code> a strategy is defined as a set of action edges with one action edge per decision node. It is necessary to use the option <code>by=&quot;path&quot;</code> only if information about each pathway is required; normally it is sufficient to call <code>evaluate</code> which will automatically aggregate the evaluation by strategy.</p>
</div>
<div id="model-results" class="section level1">
<h1>Model results</h1>
<p>The evaluation of each pathway, for each strategy, yields the following table:</p>
<table>
<thead>
<tr class="header">
<th align="left">Leaf</th>
<th align="left">d1</th>
<th align="right">Probability</th>
<th align="right">Cost</th>
<th align="right">Utility</th>
<th align="right">QALY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="left">Sumatriptan</td>
<td align="right">0.33</td>
<td align="right">5.34</td>
<td align="right">0.33</td>
<td align="right">0.0018</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="left">Sumatriptan</td>
<td align="right">0.23</td>
<td align="right">7.29</td>
<td align="right">0.20</td>
<td align="right">0.0011</td>
</tr>
<tr class="odd">
<td align="left">C</td>
<td align="left">Sumatriptan</td>
<td align="right">0.41</td>
<td align="right">6.55</td>
<td align="right">-0.12</td>
<td align="right">-0.0007</td>
</tr>
<tr class="even">
<td align="left">D</td>
<td align="left">Sumatriptan</td>
<td align="right">0.04</td>
<td align="right">2.80</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
<tr class="odd">
<td align="left">E</td>
<td align="left">Sumatriptan</td>
<td align="right">0.00</td>
<td align="right">0.08</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">F</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.27</td>
<td align="right">0.35</td>
<td align="right">0.27</td>
<td align="right">0.0015</td>
</tr>
<tr class="odd">
<td align="left">G</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.11</td>
<td align="right">0.30</td>
<td align="right">0.10</td>
<td align="right">0.0006</td>
</tr>
<tr class="even">
<td align="left">H</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.57</td>
<td align="right">0.75</td>
<td align="right">-0.17</td>
<td align="right">-0.0009</td>
</tr>
<tr class="odd">
<td align="left">I</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.05</td>
<td align="right">3.20</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
<tr class="even">
<td align="left">J</td>
<td align="left">Caffeine/Ergotamine</td>
<td align="right">0.00</td>
<td align="right">0.12</td>
<td align="right">0.00</td>
<td align="right">0.0000</td>
</tr>
</tbody>
</table>
<p>There are, as expected, ten pathways (5 per strategy). The expected cost, utility and QALY (utility multiplied by the time horizon of the model) for each choice can be calculated from the table above, or by invoking the <code>evaluate</code> method of a decision tree object with the default parameter <code>by=&quot;strategy&quot;</code>. This gives the following result, consistent with that reported by Evans <em>et al</em><span class="citation"><sup>2</sup></span>.</p>
<table>
<thead>
<tr class="header">
<th align="left">d1</th>
<th align="right">Cost</th>
<th align="right">Utility</th>
<th align="right">QALY</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Caffeine/Ergotamine</td>
<td align="right">4.71</td>
<td align="right">0.20128</td>
<td align="right">0.00110</td>
</tr>
<tr class="even">
<td align="left">Sumatriptan</td>
<td align="right">22.06</td>
<td align="right">0.41686</td>
<td align="right">0.00228</td>
</tr>
</tbody>
</table>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-briggs2006">
<p>1 Briggs A, Claxton K, Sculpher M. <em>Decision modelling for health economic evaluation</em>. Oxford, UK: Oxford University Press; 2006.</p>
</div>
<div id="ref-evans1997">
<p>2 Evans KW, Boan JA, Evans JL, Shuaib A. Economic evaluation of oral Sumatriptan compared with oral Caffeine/Ergotamine for migraine. <em>Pharmacoeconomics</em> 1997;<strong>12</strong>:565–77.</p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
